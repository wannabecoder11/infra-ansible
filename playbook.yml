---
# ----------------------------------------------------------------------------------------
- name: Dell Ubuntu lappi
  hosts: dell-ubuntu
  become: true
  vars_files:
    - 'vars/vault.yml'
    - 'group_vars/{{ ansible_os_family }}.yml'
  roles:
    - role: base
    - role: apt
    - role: workstation
    - role: petermosmans.customize-gnome
      tags: gnome
    - role: geerlingguy.nfs
    - role: generate-fstab
    - role: geerlingguy.docker
    - role: "diademiemi.flatpak"
      tags: flatpak
    - role: gikeymarcia.neovim
      tags: nvim
    - role: intel-iGPU-driver
      tags: gpu

- name: Acer-lappi Fedora play
  hosts: acer-lappi-fedora
  become: true
  vars_files:
    - 'vars/vault.yml'
    - "group_vars/{{ ansible_facts['os_family'] }}.yml"
  roles:
    - role: geerlingguy.pip
    - role: taktus.fzf
    - role: jahrik.yay
      when: ansible_facts['os_family'] == 'Archlinux'
    - role: grog.package
      tags: grog
      ansible_pkg_mgr: dnf
    - role: base
    - role: snaps
      tags: snaps
    - role: workstation
    - role: petermosmans.customize-gnome
      tags: gnome
    - role: geerlingguy.nfs
    - role: generate-fstab
    - role: geerlingguy.docker
    - role: "diademiemi.flatpak"
      tags: flatpak
    - role: gikeymarcia.neovim
#    - role: intel-iGPU-driver
#      tags: gpu


# ----------------------------------------------------------------------------------------
- name: PVE play
  hosts: pve
  become: true
  vars_files:
    - 'group_vars/{{ ansible_os_family }}.yml'
    - 'vars/vault.yml'
  roles:
    - role: ironicbadger.proxmox_nag_removal
    - role: geerlingguy.nfs
    - role: ironicbadger.snapraid
    - role: generate-fstab
    - role: file-sharing
    - role: aisbergg.snapper
    - role: geerlingguy.docker
    - role: hd-idle
    - role: cron
    - role: btrbk
    - role: docker-compose
      tags: compose,updates
    - role: artis3n.tailscale
      tags: tailscale
    - role: backup-script
      tags: backup
    - role: gikeymarcia.neovim
      tags: nvim

# ----------------------------------------------------------------------------------------
- name: Oracle VM play
  hosts: oraclevm
  become: true
  vars_files:
    - 'group_vars/{{ ansible_os_family }}.yml'
    - 'vars/vault.yml'
  roles:
    - role: geerlingguy.docker
    - role: generate-fstab
    - role: docker-compose
      tags: compose,updates
    #- role: artis3n.tailscale
      #tags: tailscale
    - role: backup-script
      tags: backup

# ----------------------------------------------------------------------------------------
- name: Oracle public VM play
  hosts: oraclevmpublic
  become: true
  vars_files:
    - 'group_vars/{{ ansible_os_family }}.yml'
    - 'vars/vault.yml'
  roles:
    - role: geerlingguy.docker
    - role: docker-compose
      tags: compose,updates
    #- role: artis3n.tailscale
